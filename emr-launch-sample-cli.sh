## Sample cli to launch EMR 5.15.0 p3.16xl cluster with 1 master plus 4 core nodes, each node has a 2TB EBS storage attached, change the arguments in <...> to your values:

aws emr create-cluster --applications Name=Spark Name=Hadoop Name=Ganglia Name=Pig Name=Livy Name=Hive Name=Presto Name=JupyterHub Name=MXNet Name=Flink Name=Hue Name=Zeppelin Name=Tez Name=HCatalog Name=Sqoop Name=ZooKeeper Name=Mahout Name=Oozie Name=HBase Name=Phoenix --ec2-attributes '{"KeyName":"<your EC2 key name>","InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"<your subnet id>","EmrManagedSlaveSecurityGroup":"<your slave security group>","EmrManagedMasterSecurityGroup":"<your master security group>"}' --release-label emr-5.15.0 --steps '[{"Args":["s3://tomzeng/BAs/install-pdsh.sh"],"Type":"CUSTOM_JAR","ActionOnFailure":"CONTINUE","Jar":"s3://tomzeng/BAs/script-runner.jar","Properties":"","Name":"Custom JAR"}]' --instance-groups '[{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":2000,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":true},"InstanceGroupType":"MASTER","InstanceType":"p3.16xlarge","Name":"MASTER"},{"InstanceCount":1,"EbsConfiguration":{"EbsBlockDeviceConfigs":[{"VolumeSpecification":{"SizeInGB":2000,"VolumeType":"gp2"},"VolumesPerInstance":1}],"EbsOptimized":false},"InstanceGroupType":"CORE","InstanceType":"p3.16xlarge","Name":"CORE"}]' --configurations '[{"Classification":"hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]},{"Classification":"presto-connector-hive","Properties":{"hive.metastore.glue.datacatalog.enabled":"true"},"Configurations":[]},{"Classification":"spark-hive-site","Properties":{"hive.metastore.client.factory.class":"com.amazonaws.glue.catalog.metastore.AWSGlueDataCatalogHiveClientFactory"},"Configurations":[]}]' --bootstrap-actions '[{"Path":"s3://tomzeng/BAs/install-tf-horovod-emr-5.14-5.15-gpu.sh","Name":"install tf horovod"}]' --ebs-root-volume-size 75 --service-role EMR_DefaultRole --name 'emr-5.15.0 p3.16xl 1+4 tf horovod' --scale-down-behavior TERMINATE_AT_TASK_COMPLETION --region us-east-1
